(()=>{"use strict";var __webpack_modules__={260:function(){},514:function(e,t,n){n.d(t,{C_:()=>y});var i=n("412"),o=n("980"),r=n("512"),s=n.n(r),a=n("353");function l(e,t,n){let i=new Map,o=new Map;for(let e of t.shallowNodes)o.set(e,null);i.set(n,0);for(let n=0;n<t.shallowNodeCount-1;n++)for(let n of t.shallowEdges){let t=n.source,r=n.target,s=e.getConnectionByPair(n.source.id,n.target.id).weight,a=(i.get(t)??1/0)+s;a<(i.get(r)??1/0)&&(i.set(r,a),o.set(r,t))}return{distances:i,predecessors:o}}function d(e,t,n){if("endpoint"!=e.typeOf(t)&&"router"!=e.typeOf(t))return null;if("endpoint"!=e.typeOf(n)&&"router"!=e.typeOf(n))return null;let i=e.graph.graph,o=i.findNode(t),r=i.findNode(n),s=l(e,i,o),a=[],d=r;for(;d;)a.unshift(d),d=s.predecessors.get(d)??null;let c=[];for(let t=0;t<a.length-1;t++){let n=a[t],i=a[t+1],o=e.getConnectionByPair(n.id,i.id);c.push(o)}return c}class c extends Event{constructor(e,t){super("changed",{bubbles:!1,cancelable:!1,composed:!0}),(0,i._)(this,"kind",void 0),(0,i._)(this,"affectedObjects",void 0),this.kind=e,this.affectedObjects=t}}class h extends Event{constructor(e,t){super("added",{bubbles:!1,cancelable:!1,composed:!0}),(0,i._)(this,"kind",void 0),(0,i._)(this,"object",void 0),this.kind=e,this.object=t}}class u extends Event{constructor(e,t){super("removed",{bubbles:!1,cancelable:!1,composed:!0}),(0,i._)(this,"kind",void 0),(0,i._)(this,"id",void 0),this.kind=e,this.id=t}}class p extends Error{constructor(e){super("Object "+(e.name||e.hostname)+" already exists"),(0,i._)(this,"newObject",void 0),this.newObject=e}}class m extends Error{constructor(e){super(`IP ${e} already exists in this network`)}}class f extends Error{constructor(e){super(`IP ${e} is not a valid IP address`)}}class g extends Error{constructor(e){super(`Hostname ${e} is unresolved`)}}class v extends Error{constructor(e,t){super(`Connection ${e} <-> ${t} already exists`)}}class y{get snapshot(){return o.e3.encode(this.snapshot_).finish()}set snapshot(e){this.importSnapshot(e)}get hostnames(){return[...this.snapshot_.endpoints.map(e=>e.hostname),...this.snapshot_.routers.map(e=>e.hostname)]}get graph(){let e=new a.kJ,t={};return this.snapshot_.gadgets.forEach(n=>{let{coords:i,name:r}=n;i=i||o.y$.create();let s=new a.NB(r);e.addNode(s),t[r]=new a.G$(s),t[r].boundaryCurve=a.fk.mkCircle(128,new a.E9(0,0))}),[...this.snapshot_.endpoints,...this.snapshot_.routers].forEach(n=>{let{coords:i,hostname:r}=n;i=i||o.y$.create();let s=new a.NB(r);e.addNode(s),t[r]=new a.G$(s),t[r].boundaryCurve=a.fk.mkCircle(128,new a.E9(0,0))}),this.snapshot_.connections.forEach(e=>{let n=new a.kS(t[e.from].node,t[e.to].node),i=new a.kS(t[e.to].node,t[e.from].node);new a.Uq(n),new a.Uq(i)}),new a.sJ(e)}getEndpoint(e){for(let t=0;t<this.snapshot_.endpoints.length;t++)if(this.snapshot_.endpoints[t].hostname===e)return this.snapshot_.endpoints[t];return null}getEndpointByIP(e,t){if(!this.getRouter(t))throw new g(t);let n=this.getConnectionsByHostname(t);for(let i=0;i<n.length;i++){let o=n[i],r=o.to==t?o.from:o.to,s=this.getEndpoint(r);if(s&&s.ipAddr==e)return s}return null}getRouter(e){for(let t=0;t<this.snapshot_.routers.length;t++)if(this.snapshot_.routers[t].hostname===e)return this.snapshot_.routers[t];return null}getRouterByExternalIP(e){for(let t=0;t<this.snapshot_.routers.length;t++)if(this.snapshot_.routers[t].extIpAddr===e)return this.snapshot_.routers[t];return null}getConnection(e){for(let t=0;t<this.snapshot_.connections.length;t++)if(this.snapshot_.connections[t].name===e)return this.snapshot_.connections[t];return null}getConnectionByPair(e,t){for(let n=0;n<this.snapshot_.connections.length;n++)if(this.snapshot_.connections[n].from==e&&this.snapshot_.connections[n].to==t||this.snapshot_.connections[n].from==t&&this.snapshot_.connections[n].to==e)return this.snapshot_.connections[n];return null}getConnectionsByHostname(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];for(let i=0;i<this.snapshot_.connections.length;i++){let o=this.snapshot_.connections[i];t?o.from==e&&this.getRouter(o.to)?n.push(o):o.to==e&&this.getRouter(o.from)&&n.push(o):(o.to==e||o.from==e)&&n.push(o)}return n}getGadget(e){for(let t=0;t<this.snapshot_.gadgets.length;t++)if(this.snapshot_.gadgets[t].name===e)return this.snapshot_.gadgets[t];return null}get(e){return this.getEndpoint(e)||this.getRouter(e)||this.getGadget(e)||this.getConnection(e)}has(e){return!!this.get(e)}typeOf(e){if(this.getEndpoint(e))return"endpoint";if(this.getRouter(e))return"router";if(this.getGadget(e))return"gadget";else if(this.getConnection(e))return"connection";else return null}addEndpoint(e){if(this.has(e.hostname))throw new p(e);if(!s().IPv4.isValid(e.ipAddr))throw new f(e.ipAddr);let t=s().IPv4.parse(e.ipAddr).octets;if(192!=t[0]||168!=t[1]||0!=t[2])throw new f(e.ipAddr);this.snapshot_.endpoints.push(e),this.dispatchEvent(new h("endpoint",e))}validateRouterIP(e){let t=this.getRouterByExternalIP(e.extIpAddr);if(t&&t!=e)throw new m(e.extIpAddr);if(!s().IPv4.isValid(e.lanIpAddr))throw new f(e.lanIpAddr);let n=s().IPv4.parse(e.lanIpAddr).octets;if(192!=n[0]||168!=n[1]||0!=n[2])throw new f(e.lanIpAddr);this.getConnectionsByHostname(e.hostname).forEach(t=>{let n=t.from==e.hostname?t.to:t.from,i=this.getEndpoint(n);if(i&&i.ipAddr==e.lanIpAddr)throw new m(e.lanIpAddr)})}addRouter(e){if(this.has(e.hostname))throw new p(e);this.validateRouterIP(e),this.snapshot_.routers.push(e),this.dispatchEvent(new h("router",e))}addGadget(e){if(this.has(e.name))throw new p(e);this.snapshot_.gadgets.push(e),this.dispatchEvent(new h("gadget",e))}addConnection(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=!(arguments.length>6)||void 0===arguments[6]||arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o.Rj.OpticFiber,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;if(e){if(!t)throw new g(r)}else throw new g(i);if(this.getConnectionByPair(i,r))throw new v(i,r);if(this.has(n))throw new p(this.get(n));let c=o.ew.create({name:n,from:i,to:r,weight:s,duplex:a,highlighted:!1,errors:d,type:l});this.snapshot_.connections.push(c),this.dispatchEvent(new h("connection",c))}connectEndpointToEndpoint(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.Rj.OpticFiber,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=this.getEndpoint(t),d=this.getEndpoint(n);if(l&&d&&l.ipAddr==d.ipAddr)throw new m(l.ipAddr);this.addConnection(l,d,e,t,n,i,r,s,a)}connectEndpointToRouter(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.Rj.OpticFiber,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=this.getEndpoint(t),d=this.getRouter(n);if(l){if(!d)throw new g(n)}else throw new g(t);if(this.getEndpointByIP(l.ipAddr,n)||l.ipAddr==d.lanIpAddr)throw new m(l.ipAddr);this.addConnection(l,this.getRouter(n),e,t,n,i,r,s,a)}connectRouterToRouter(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.Rj.OpticFiber,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.addConnection(this.getRouter(t),this.getRouter(n),e,t,n,i,r,s,a)}highlightConnection(e){let t=this.getConnection(e);return!!t&&(t.highlighted=!0,this.dispatchEvent(new c("connection",[t])),!0)}highlightEdge(e,t){let n=this.getConnectionByPair(e,t);return!!n&&(n.highlighted=!0,this.dispatchEvent(new c("connection",[n])),!0)}clearHighlights(){let e=[];this.snapshot_.connections.forEach(t=>{t.highlighted&&(t.highlighted=!1,e.push(t))}),this.dispatchEvent(new c("connection",e))}editEndpoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getEndpoint(e);return!!i&&(!i.coords&&(i.coords=o.y$.create()),i.coords.x=Math.ceil(t??i.coords.x),i.coords.y=Math.ceil(n??i.coords.y),this.dispatchEvent(new c("endpoint",[i])),!0)}editGadget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.getGadget(e);return!!r&&(r.type=t??r.type,!r.coords&&(r.coords=o.y$.create()),r.coords.x=Math.ceil(n??r.coords.x),r.coords.y=Math.ceil(i??r.coords.y),this.dispatchEvent(new c("gadget",[r])),!0)}editRouter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=this.getRouter(e);if(!s)return!1;let a=s.lanIpAddr,l=s.extIpAddr;if(t&&(s.lanIpAddr=t),n&&(s.extIpAddr=n),t||n)try{this.validateRouterIP(s)}catch(e){throw s.lanIpAddr=a,s.extIpAddr=l,e}return!s.coords&&(s.coords=o.y$.create()),s.coords.x=Math.ceil(i??s.coords.x),s.coords.y=Math.ceil(r??s.coords.y),this.dispatchEvent(new c("router",[s])),!0}editConnection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.getConnection(e);return!!r&&(r.weight=t??r.weight,r.duplex=n??r.duplex,r.type=i??r.type,r.errors=o??r.errors,this.dispatchEvent(new c("connection",[r])),!0)}removeEntity(e,t,n){if(void 0===this.snapshot_[e+"s"])return!1;let i=!1;return this.snapshot_[e+"s"]=this.snapshot_[e+"s"].filter(e=>e[t]!=n||(i=!0,!1)),i&&(this.dispatchEvent(new u(e,n)),("endpoint"==e||"router"==e)&&this.getConnectionsByHostname(n).forEach(e=>this.removeEntity("connection","name",e.name))),i}removeEndpoint(e){return this.removeEntity("endpoint","hostname",e)}removeRouter(e){return this.removeEntity("router","hostname",e)}removeGadget(e){return this.removeEntity("gadget","name",e)}removeConnection(e){return this.removeEntity("connection","name",e)}importSnapshot(e){this.reset(),e instanceof Uint8Array&&(e=o.e3.decode(e)),e.gadgets.forEach(e=>this.addGadget(e)),e.routers.forEach(e=>this.addRouter(e)),e.endpoints.forEach(e=>this.addEndpoint(e)),e.connections.forEach(e=>{let t=Object.create(null);this.addConnection(t,t,e.name,e.from,e.to,e.weight,e.duplex,e.type,e.errors)})}reset(){this.snapshot_.gadgets.forEach(e=>this.removeGadget(e.name)),this.snapshot_.connections.forEach(e=>this.removeConnection(e.name)),this.snapshot_.endpoints.forEach(e=>this.removeEndpoint(e.hostname)),this.snapshot_.routers.forEach(e=>this.removeRouter(e.hostname))}getNormalizedGraph(){let e=this.graph;return(0,a.Nj)(e),e}normalizeEntityCoordinates(){let e=this.getNormalizedGraph();this.snapshot_.gadgets.forEach(t=>{let n=e.findNode(t.name);n&&(t.coords=o.y$.create({x:Math.ceil(n.center.x),y:Math.ceil(n.center.y)}))}),[...this.snapshot_.endpoints,...this.snapshot_.routers].forEach(t=>{let n=e.findNode(t.hostname);n&&(t.coords=o.y$.create({x:Math.ceil(n.center.x),y:Math.ceil(n.center.y)}))}),this.dispatchEvent(new c("endpoint",this.snapshot_.endpoints)),this.dispatchEvent(new c("routers",this.snapshot_.routers)),this.dispatchEvent(new c("gadget",this.snapshot_.gadgets))}findRoute(e,t){let n=d(this,e,t);return(null==n?void 0:n.length)?n:null}addEventListener(e,t){t&&("change"==e?this.onChange=t:"added"==e?this.onAdded=t:"removed"==e&&(this.onRemoved=t))}dispatchEvent(e){if(e instanceof c){if(!this.onChange)return!0;void 0!==this.onChange.handleEvent?this.onChange.handleEvent(e):this.onChange(e)}else if(e instanceof h){if(!this.onAdded)return!0;void 0!==this.onAdded.handleEvent?this.onAdded.handleEvent(e):this.onAdded(e)}else if(e instanceof u){if(!this.onRemoved)return!0;void 0!==this.onRemoved.handleEvent?this.onRemoved.handleEvent(e):this.onRemoved(e)}return!0}removeEventListener(e,t){t&&("change"==e?this.onChange=null:"added"==e?this.onAdded=null:"removed"==e&&(this.onRemoved=null))}constructor(){(0,i._)(this,"snapshot_",o.e3.create()),(0,i._)(this,"onAdded",null),(0,i._)(this,"onChange",null),(0,i._)(this,"onRemoved",null)}}},980:function(e,t,n){n.d(t,{F0:function(){return u},F5:function(){return m},Rj:function(){return s},e3:function(){return b},ew:function(){return y},y$:function(){return c}});var i=n(765);function o(e){switch(e){case 0:case"Suisei":return 0;default:return -1}}function r(e){if(0===e)return"Suisei";return"UNRECOGNIZED"}var s=function(e){return e[e.OpticFiber=0]="OpticFiber",e[e.Satellite=1]="Satellite",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function a(e){switch(e){case 0:case"OpticFiber":return 0;case 1:case"Satellite":return 1;default:return -1}}function l(e){switch(e){case 0:return"OpticFiber";case 1:return"Satellite";default:return"UNRECOGNIZED"}}function d(){return{x:0,y:0}}let c={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Lt;return 0!==e.x&&t.uint32(13).sfixed32(e.x),0!==e.y&&t.uint32(21).sfixed32(e.y),t},decode(e,t){let n=e instanceof i.oP?e:new i.oP(e),o=void 0===t?n.len:n.pos+t,r=d();for(;n.pos<o;){let e=n.uint32();switch(e>>>3){case 1:if(13!==e)break;r.x=n.sfixed32();continue;case 2:if(21!==e)break;r.y=n.sfixed32();continue}if((7&e)==4||0===e)break;n.skip(7&e)}return r},fromJSON:e=>({x:E(e.x)?globalThis.Number(e.x):0,y:E(e.y)?globalThis.Number(e.y):0}),toJSON(e){let t={};return 0!==e.x&&(t.x=Math.round(e.x)),0!==e.y&&(t.y=Math.round(e.y)),t},create:e=>c.fromPartial(e??{}),fromPartial(e){let t=d();return t.x=e.x??0,t.y=e.y??0,t}};function h(){return{hostname:"",lanIpAddr:"",extIpAddr:"",coords:void 0}}let u={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Lt;return""!==e.hostname&&t.uint32(10).string(e.hostname),""!==e.lanIpAddr&&t.uint32(18).string(e.lanIpAddr),""!==e.extIpAddr&&t.uint32(26).string(e.extIpAddr),void 0!==e.coords&&c.encode(e.coords,t.uint32(34).fork()).join(),t},decode(e,t){let n=e instanceof i.oP?e:new i.oP(e),o=void 0===t?n.len:n.pos+t,r=h();for(;n.pos<o;){let e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;r.hostname=n.string();continue;case 2:if(18!==e)break;r.lanIpAddr=n.string();continue;case 3:if(26!==e)break;r.extIpAddr=n.string();continue;case 4:if(34!==e)break;r.coords=c.decode(n,n.uint32());continue}if((7&e)==4||0===e)break;n.skip(7&e)}return r},fromJSON:e=>({hostname:E(e.hostname)?globalThis.String(e.hostname):"",lanIpAddr:E(e.lanIpAddr)?globalThis.String(e.lanIpAddr):"",extIpAddr:E(e.extIpAddr)?globalThis.String(e.extIpAddr):"",coords:E(e.coords)?c.fromJSON(e.coords):void 0}),toJSON(e){let t={};return""!==e.hostname&&(t.hostname=e.hostname),""!==e.lanIpAddr&&(t.lanIpAddr=e.lanIpAddr),""!==e.extIpAddr&&(t.extIpAddr=e.extIpAddr),void 0!==e.coords&&(t.coords=c.toJSON(e.coords)),t},create:e=>u.fromPartial(e??{}),fromPartial(e){let t=h();return t.hostname=e.hostname??"",t.lanIpAddr=e.lanIpAddr??"",t.extIpAddr=e.extIpAddr??"",t.coords=void 0!==e.coords&&null!==e.coords?c.fromPartial(e.coords):void 0,t}};function p(){return{hostname:"",ipAddr:"",coords:void 0}}let m={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Lt;return""!==e.hostname&&t.uint32(10).string(e.hostname),""!==e.ipAddr&&t.uint32(18).string(e.ipAddr),void 0!==e.coords&&c.encode(e.coords,t.uint32(26).fork()).join(),t},decode(e,t){let n=e instanceof i.oP?e:new i.oP(e),o=void 0===t?n.len:n.pos+t,r=p();for(;n.pos<o;){let e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;r.hostname=n.string();continue;case 2:if(18!==e)break;r.ipAddr=n.string();continue;case 3:if(26!==e)break;r.coords=c.decode(n,n.uint32());continue}if((7&e)==4||0===e)break;n.skip(7&e)}return r},fromJSON:e=>({hostname:E(e.hostname)?globalThis.String(e.hostname):"",ipAddr:E(e.ipAddr)?globalThis.String(e.ipAddr):"",coords:E(e.coords)?c.fromJSON(e.coords):void 0}),toJSON(e){let t={};return""!==e.hostname&&(t.hostname=e.hostname),""!==e.ipAddr&&(t.ipAddr=e.ipAddr),void 0!==e.coords&&(t.coords=c.toJSON(e.coords)),t},create:e=>m.fromPartial(e??{}),fromPartial(e){let t=p();return t.hostname=e.hostname??"",t.ipAddr=e.ipAddr??"",t.coords=void 0!==e.coords&&null!==e.coords?c.fromPartial(e.coords):void 0,t}};function f(){return{name:"",type:0,coords:void 0}}let g={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Lt;return""!==e.name&&t.uint32(10).string(e.name),0!==e.type&&t.uint32(16).int32(e.type),void 0!==e.coords&&c.encode(e.coords,t.uint32(26).fork()).join(),t},decode(e,t){let n=e instanceof i.oP?e:new i.oP(e),o=void 0===t?n.len:n.pos+t,r=f();for(;n.pos<o;){let e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;r.name=n.string();continue;case 2:if(16!==e)break;r.type=n.int32();continue;case 3:if(26!==e)break;r.coords=c.decode(n,n.uint32());continue}if((7&e)==4||0===e)break;n.skip(7&e)}return r},fromJSON:e=>({name:E(e.name)?globalThis.String(e.name):"",type:E(e.type)?o(e.type):0,coords:E(e.coords)?c.fromJSON(e.coords):void 0}),toJSON(e){let t={};return""!==e.name&&(t.name=e.name),0!==e.type&&(t.type=r(e.type)),void 0!==e.coords&&(t.coords=c.toJSON(e.coords)),t},create:e=>g.fromPartial(e??{}),fromPartial(e){let t=f();return t.name=e.name??"",t.type=e.type??0,t.coords=void 0!==e.coords&&null!==e.coords?c.fromPartial(e.coords):void 0,t}};function v(){return{name:"",from:"",to:"",weight:0,duplex:!1,errors:0,highlighted:!1,type:0}}let y={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Lt;return""!==e.name&&t.uint32(10).string(e.name),""!==e.from&&t.uint32(18).string(e.from),""!==e.to&&t.uint32(26).string(e.to),0!==e.weight&&t.uint32(32).uint32(e.weight),!1!==e.duplex&&t.uint32(40).bool(e.duplex),0!==e.errors&&t.uint32(48).uint32(e.errors),!1!==e.highlighted&&t.uint32(56).bool(e.highlighted),0!==e.type&&t.uint32(64).int32(e.type),t},decode(e,t){let n=e instanceof i.oP?e:new i.oP(e),o=void 0===t?n.len:n.pos+t,r=v();for(;n.pos<o;){let e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;r.name=n.string();continue;case 2:if(18!==e)break;r.from=n.string();continue;case 3:if(26!==e)break;r.to=n.string();continue;case 4:if(32!==e)break;r.weight=n.uint32();continue;case 5:if(40!==e)break;r.duplex=n.bool();continue;case 6:if(48!==e)break;r.errors=n.uint32();continue;case 7:if(56!==e)break;r.highlighted=n.bool();continue;case 8:if(64!==e)break;r.type=n.int32();continue}if((7&e)==4||0===e)break;n.skip(7&e)}return r},fromJSON:e=>({name:E(e.name)?globalThis.String(e.name):"",from:E(e.from)?globalThis.String(e.from):"",to:E(e.to)?globalThis.String(e.to):"",weight:E(e.weight)?globalThis.Number(e.weight):0,duplex:!!E(e.duplex)&&globalThis.Boolean(e.duplex),errors:E(e.errors)?globalThis.Number(e.errors):0,highlighted:!!E(e.highlighted)&&globalThis.Boolean(e.highlighted),type:E(e.type)?a(e.type):0}),toJSON(e){let t={};return""!==e.name&&(t.name=e.name),""!==e.from&&(t.from=e.from),""!==e.to&&(t.to=e.to),0!==e.weight&&(t.weight=Math.round(e.weight)),!1!==e.duplex&&(t.duplex=e.duplex),0!==e.errors&&(t.errors=Math.round(e.errors)),!1!==e.highlighted&&(t.highlighted=e.highlighted),0!==e.type&&(t.type=l(e.type)),t},create:e=>y.fromPartial(e??{}),fromPartial(e){let t=v();return t.name=e.name??"",t.from=e.from??"",t.to=e.to??"",t.weight=e.weight??0,t.duplex=e.duplex??!1,t.errors=e.errors??0,t.highlighted=e.highlighted??!1,t.type=e.type??0,t}};function w(){return{endpoints:[],routers:[],gadgets:[],connections:[]}}let b={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Lt;for(let n of e.endpoints)m.encode(n,t.uint32(10).fork()).join();for(let n of e.routers)u.encode(n,t.uint32(18).fork()).join();for(let n of e.gadgets)g.encode(n,t.uint32(26).fork()).join();for(let n of e.connections)y.encode(n,t.uint32(34).fork()).join();return t},decode(e,t){let n=e instanceof i.oP?e:new i.oP(e),o=void 0===t?n.len:n.pos+t,r=w();for(;n.pos<o;){let e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;r.endpoints.push(m.decode(n,n.uint32()));continue;case 2:if(18!==e)break;r.routers.push(u.decode(n,n.uint32()));continue;case 3:if(26!==e)break;r.gadgets.push(g.decode(n,n.uint32()));continue;case 4:if(34!==e)break;r.connections.push(y.decode(n,n.uint32()));continue}if((7&e)==4||0===e)break;n.skip(7&e)}return r},fromJSON:e=>({endpoints:globalThis.Array.isArray(null==e?void 0:e.endpoints)?e.endpoints.map(e=>m.fromJSON(e)):[],routers:globalThis.Array.isArray(null==e?void 0:e.routers)?e.routers.map(e=>u.fromJSON(e)):[],gadgets:globalThis.Array.isArray(null==e?void 0:e.gadgets)?e.gadgets.map(e=>g.fromJSON(e)):[],connections:globalThis.Array.isArray(null==e?void 0:e.connections)?e.connections.map(e=>y.fromJSON(e)):[]}),toJSON(e){var t,n,i,o;let r={};return(null===(t=e.endpoints)||void 0===t?void 0:t.length)&&(r.endpoints=e.endpoints.map(e=>m.toJSON(e))),(null===(n=e.routers)||void 0===n?void 0:n.length)&&(r.routers=e.routers.map(e=>u.toJSON(e))),(null===(i=e.gadgets)||void 0===i?void 0:i.length)&&(r.gadgets=e.gadgets.map(e=>g.toJSON(e))),(null===(o=e.connections)||void 0===o?void 0:o.length)&&(r.connections=e.connections.map(e=>y.toJSON(e))),r},create:e=>b.fromPartial(e??{}),fromPartial(e){var t,n,i,o;let r=w();return r.endpoints=(null===(t=e.endpoints)||void 0===t?void 0:t.map(e=>m.fromPartial(e)))||[],r.routers=(null===(n=e.routers)||void 0===n?void 0:n.map(e=>u.fromPartial(e)))||[],r.gadgets=(null===(i=e.gadgets)||void 0===i?void 0:i.map(e=>g.fromPartial(e)))||[],r.connections=(null===(o=e.connections)||void 0===o?void 0:o.map(e=>y.fromPartial(e)))||[],r}};function E(e){return null!=e}},862:function(e,t,n){function i(){return{time:{clean:0,retransmission:0},traffic:{service:0,payload:{clean:0,retransmission:0}},packets:{service:0,payload:0},quality:{delivered:0,corrected:0,lost:0}}}n.d(t,{EN:function(){return o},SY:function(){return r},Zn:function(){return i}});class o extends Error{}class r extends Error{}},903:function(e,t,n){n.d(t,{S:function(){return r}});var i=n(412),o=n(862);class r{sendPacket(e,t,n,i){let o=!1,r=!1;for(;!o;)for(let s=0;s<e.length;s++){let a=e[s],l=a.weight*(a.duplex?1:2)*(n+60);if(t.time[r?"retransmission":"clean"]+=l,t.traffic.service+=60,i?t.traffic.service+=n:t.traffic.payload[r?"retransmission":"clean"]+=n,t.packets[i?"service":"payload"]++,Math.random()<=a.errors/100){t.quality.corrected++,r=!0;break}t.quality.delivered++,s==e.length-1&&(!i&&this.sendPacket(e,t,0,!0),o=!0)}}runTest(e,t,n,i){if(!this.model)throw new o.EN;if(!this.model.get(e)||!this.model.get(t))throw new o.SY("Either one or both hosts are not registered in network");let r=this.model.findRoute(e,t);if(!r)throw new o.SY("Route not found");let s=(0,o.Zn)();this.sendPacket(r,s,0,!0),this.sendPacket(r,s,0,!0),this.sendPacket(r,s,0,!0);let a=Math.floor(i/n),l=i-a*n,d=[...[...Array(a).keys()].map(e=>n)];return l&&d.push(l),d.forEach(e=>this.sendPacket(r,s,e,!1)),this.sendPacket(r,s,0,!0),s}setModel(e){this.model=e}constructor(){(0,i._)(this,"model",null)}}},147:function(e,t,n){n.d(t,{p:function(){return r}});var i=n(412),o=n(862);class r{runTest(e,t,n,i){if(!this.model)throw new o.EN;if(!this.model.get(e)||!this.model.get(t))throw new o.SY("Either one or both hosts are not registered in network");let r=this.model.findRoute(e,t);if(!r)throw new o.SY("Route not found");let s=Math.floor(i/n),a=i-s*n,l=[...[...Array(s).keys()].map(e=>n)];a&&l.push(a);let d=(0,o.Zn)();return l.forEach(e=>{for(let t=0;t<r.length;t++){let n=r[t],i=n.weight*(n.duplex?1:2)*(e+28);if(d.traffic.service+=28,d.traffic.payload.clean+=e,d.packets.payload++,d.time.clean+=i,Math.random()<=n.errors/100){d.quality.lost++;break}d.quality.delivered++}}),d}setModel(e){this.model=e}constructor(){(0,i._)(this,"model",null)}}},757:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{m:function(){return TestRunnerApplet}});var _swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(412),_WinUI_DialogBox_ts__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25),_Networking_TcpRunner_ts__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(903),_Networking_UdpRunner_ts__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(147),_WinUI_DialogTextBox_ts__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(690),exceljs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(295),exceljs__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(exceljs__WEBPACK_IMPORTED_MODULE_1__),downloadjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(729),downloadjs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(downloadjs__WEBPACK_IMPORTED_MODULE_2__);let{CoffeeScript}=__webpack_require__(779);class TestRunnerApplet extends _WinUI_DialogBox_ts__WEBPACK_IMPORTED_MODULE_3__.sD{set model(e){this.model_=e}onMaximize(e){}onMinimize(e){}async onExport(){if(Object.keys(this.reports).length<1){await new _WinUI_DialogTextBox_ts__WEBPACK_IMPORTED_MODULE_0__.z("Error","No tests to export",this.dialogEl,_WinUI_DialogBox_ts__WEBPACK_IMPORTED_MODULE_3__.pc|_WinUI_DialogBox_ts__WEBPACK_IMPORTED_MODULE_3__.G5).display();return}let e=new exceljs__WEBPACK_IMPORTED_MODULE_1__.Workbook,t=e.addWorksheet("Test Results");for(let e in t.columns=[{header:"Test",key:"id",width:26},{header:"Time (total)",key:"timeTotal",width:11},{header:"Time (clean)",key:"timeClean",width:11},{header:"Time (retransmission)",key:"timeRetransmission",width:20},{header:"Traffic (service)",key:"trafficSvc",width:20},{header:"Traffic (payload)",key:"trafficPayloadClean",width:15},{header:"Traffic (retransmission)",key:"trafficPayloadRetransmission",width:21},{header:"Traffic (total payload)",key:"trafficPayloadTotal",width:19},{header:"Traffic (total)",key:"trafficTotal",width:12},{header:"Packets (total)",key:"packetsTotal",width:13},{header:"Packets (service)",key:"packetsService",width:15},{header:"Packets (payload)",key:"packetsPayload",width:16},{header:"Packets (delivered)",key:"packetsDelivered",width:18},{header:"Packets (corrected)",key:"packetsCorrected",width:17},{header:"Packets (loss)",key:"packetsLoss",width:12}],this.reports){let n=this.reports[e];t.addRow({id:e,timeTotal:n.time.clean+n.time.retransmission,timeClean:n.time.clean,timeRetransmission:n.time.retransmission,trafficSvc:n.traffic.service,trafficTotal:n.traffic.service+n.traffic.payload.clean+n.traffic.payload.retransmission,trafficPayloadTotal:n.traffic.payload.clean+n.traffic.payload.retransmission,trafficPayloadClean:n.traffic.payload.clean,trafficPayloadRetransmission:n.traffic.payload.retransmission,packetsTotal:n.packets.payload+n.packets.service,packetsService:n.packets.service,packetsPayload:n.packets.payload,packetsDelivered:n.quality.delivered,packetsCorrected:n.quality.corrected,packetsLoss:n.quality.lost})}let n=new Blob([await e.xlsx.writeBuffer()]);downloadjs__WEBPACK_IMPORTED_MODULE_2___default()(n,prompt("Save as:","tests.xlsx")??"network.xlsx","application/vnd.ms-excel")}onRun(box,table){let code=CoffeeScript.compile(box.value),tests={},addTest=(e,t,n,i,o,r,s)=>{for(let a=0;a<s;a++)tests[e.replace("$",a)]=[t,n,i,o,r]},Model=this.model_;for(let testId in eval(code),this.reports={},tests){let runner="tcp"==tests[testId][0]?new _Networking_TcpRunner_ts__WEBPACK_IMPORTED_MODULE_4__.S:new _Networking_UdpRunner_ts__WEBPACK_IMPORTED_MODULE_5__.p;runner.setModel(Model);try{this.reports[testId]=runner.runTest(...tests[testId].slice(1))}catch(e){new _WinUI_DialogTextBox_ts__WEBPACK_IMPORTED_MODULE_0__.z("Error",`Error in ${testId}: `+e.message,this.dialogEl,_WinUI_DialogBox_ts__WEBPACK_IMPORTED_MODULE_3__.pc|_WinUI_DialogBox_ts__WEBPACK_IMPORTED_MODULE_3__.G5).display();break}}for(let testId in table.querySelectorAll("tr:has(td)").forEach(e=>e.remove()),this.reports){let report=this.reports[testId];table.querySelector("tbody").innerHTML+=`
                <tr>
                    <td>${testId}</td>
                    <td>${report.time.clean}</td>
                    <td>${report.time.retransmission}</td>
                    <td>${report.traffic.service}</td>
                    <td>${report.traffic.payload.clean}</td>
                    <td>${report.traffic.payload.retransmission}</td>
                    <td>${report.packets.service}</td>
                    <td>${report.packets.payload}</td>
                    <td>${report.quality.delivered}</td>
                    <td>${report.quality.corrected}</td>
                    <td>${report.quality.lost}</td>
                </tr>
            `}}onRender(e){if(!this.model_)throw Error("Set model property first");let t=document.createElement("div");t.style.gap="10px",t.style.width="920px",t.style.display="grid",t.style.minHeight="600px",t.style.gridTemplateColumns="1fr 2fr";let n=document.createElement("textarea");n.style.border="2px lightgray inset",n.style.resize="none";let i=document.createElement("div");i.className="has-scrollbar test-runner-tbl",i.style.height="600px",i.style.overflow="auto",i.style.background="#fff";let o=document.createElement("table");o.style.width="100%",o.style.fontSize="9px",o.style.tableLayout="fixed",o.style.borderCollapse="collapse",o.innerHTML+=`
            <tr>
                <th>Test</th>
                <th>Time (clean)</th>
                <th>Time (retry)</th>
                <th>Traffic (service)</th>
                <th>Traffic (payload)</th>
                <th>Traffic (retry)</th>
                <th>Packets (service)</th>
                <th>Packets (payload)</th>
                <th>Packets (sent)</th>
                <th>Packets (fixed)</th>
                <th>Packets (lost)</th>
            </tr>`,i.appendChild(o),t.appendChild(n),t.appendChild(i),e.appendChild(t);let r=document.createElement("section");r.classList.add("field-row"),r.style.justifyContent="flex-end";let s=document.createElement("button");s.className="default",s.textContent="Run",s.addEventListener("click",()=>this.onRun(n,o));let a=document.createElement("button");a.textContent="Export",a.addEventListener("click",()=>this.onExport()),r.append(s),r.append(a),e.append(document.createElement("br")),e.append(r)}constructor(...e){super(...e),(0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_6__._)(this,"model_",null),(0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_6__._)(this,"reports",{})}}},345:function(e,t,n){n.d(t,{W:()=>N});var i=n("412"),o=n("591"),r=n("795"),s=n("889"),a=n("526");class l{createMenuElement(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=document.createElement("ul");return i.role="menu",i.className="can-hover",i.style.width="200px",n??(n=e=>{this.containerEl.removeEventListener("click",n),i.remove(),t(null)}),this.containerEl.addEventListener("click",n),this.containerEl.__closer=n,i.addEventListener("click",e=>e.stopPropagation()),e.forEach((e,o,r)=>{e.forEach((e,s,a)=>{let l=document.createElement("li");l.role="menuitem",l.tabIndex=0,e.label&&(l.innerHTML=e.nested?e.label:`<a href="javascript:void(0);">${e.label}</a>`),e.sprite&&(l.innerHTML=`<img src="${e.sprite}"  alt="xd"/>`+l.innerHTML),!e.enabled&&(l.ariaDisabled="true"),e.id&&e.enabled&&(l.dataset.aid=e.id,l.addEventListener("click",()=>{t(e.id),n(null)})),e.nested&&e.nested.length>0&&(l.ariaHasPopup="true",l.append(this.createMenuElement(e.nested,t,n))),o!=r.length-1&&s==a.length-1&&l.classList.add("has-divider"),i.append(l)})}),i}prompt(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return new Promise(o=>{i&&void 0!==this.containerEl.__closer&&(this.containerEl.__closer(),this.containerEl.__closer=void 0);let r=e=>o(e),s=this.createMenuElement(this.items,r);s.style.visibility="hidden",document.body.append(s),n&&(window.innerHeight-t<=s.getBoundingClientRect().height&&(t-=s.getBoundingClientRect().height),window.innerWidth-e<=s.getBoundingClientRect().width&&(e-=s.getBoundingClientRect().width)),s.style.position="fixed",s.style.left=`${e}px`,s.style.top=`${t}px`,s.style.visibility="unset"})}constructor(e,t=null){(0,i._)(this,"items",void 0),(0,i._)(this,"containerEl",void 0),this.items=e,t??(t=document.getRootNode()),this.containerEl=t}}var d=n("25"),c=n("690"),h=function(e){return e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e}({});class u{constructor(e,t,n={}){(0,i._)(this,"label",void 0),(0,i._)(this,"type",void 0),(0,i._)(this,"attrs",void 0),this.label=e,this.type=t,this.attrs=n}}class p extends d.sD{onMinimize(e){}onMaximize(e){}onUserClose(e){this.close({result:1,data:null})}async onFormSubmit(e){if(e.preventDefault(),e.stopPropagation(),e.isTrusted)return;let t={},n=new FormData(e.target),i=[];for(let e of n.entries()){let n=e[1],o=null;this.validator&&(o=this.validator(e[0],n,e=>n=e)),o&&i.push(o),t[e[0]]=n}if(i.length){var o;let e=`<b>Please, correct the following errors:</b><br/>${i.join("<br/>")}`,t=new c.z("Error",e,null===(o=this.dialogEl)||void 0===o?void 0:o.querySelector(".window-body"),d.r2|d.pc|d.G5,500);await t.display();return}this.close({result:0,data:t})}async onConfirm(e){e.querySelector("form").dispatchEvent(new SubmitEvent("submit"))}createRadioGroupElement(e,t){let n=document.createElement("div");for(let i in t.attrs.options){let o=document.createElement("input");o.id="opt_"+i,o.type="radio",o.name=e,o.value=i,t.attrs.options[i][1]&&(o.checked=!0);let r=document.createElement("label");r.setAttribute("for",o.id),r.textContent=t.attrs.options[i][0],n.append(o),n.append(r),n.append(document.createElement("br"))}return n.lastChild&&n.lastChild.remove(),n}createSelectElement(e,t){let n=document.createElement("select");for(let i in n.style.width="100%",n.disabled=t.attrs.disabled??!1,n.name=e,t.attrs.options){let e=document.createElement("option");e.value=i,e.textContent=t.attrs.options[i][0],t.attrs.options[i][1]&&(e.selected=!0),n.append(e)}return n}createInputElement(e,t){let n;if("select"===t.type)n=this[t.attrs.asRadioGroup?"createRadioGroupElement":"createSelectElement"](e,t);else{for(let i in(n=document.createElement("input")).id=e,n.name=e,n.type=t.type,n.autocomplete="off",n.dataset.dialogManaged="yes",t.attrs)void 0!==t.attrs[i]&&null!==t.attrs[i]&&(n[i]=t.attrs[i]);"checkbox"!=t.type&&(n.style.width="100%")}return n}onRender(e){let t={};for(let e in this.schema){let n=document.createElement("table");for(let t in n.style.tableLayout="fixed",n.style.width=.8*this.width+"px",this.schema[e]){let i=this.schema[e][t],o=document.createElement("td");o.innerHTML=`<label for="${t}">${i.label}:</label>`,o.vAlign="top";let r=this.createInputElement(t,i),s=document.createElement("td");s.append(r),s.colSpan=2;let a=document.createElement("tr");"checkbox"==i.type?(s.innerHTML+=`<label for="${t}">${i.label}</label>`,a.append(document.createElement("td"))):a.append(o),a.append(s),n.append(a)}let i=document.createElement("article");i.hidden=!0,i.role="tabpanel",i.id="tab_"+e,i.append(n),t[e]=i}let n=document.createElement("form");n.addEventListener("submit",e=>this.onFormSubmit(e));let i=document.createElement("menu");for(let n in i.role="tablist",t){let t=document.createElement("button");t.role="tab",t.textContent=n.replace(/_/g," "),t.setAttribute("aria-controls","tab_"+n),t.addEventListener("click",()=>{e.querySelectorAll("article[role=tabpanel]").forEach(e=>{e.hidden=e.id!=="tab_"+n}),e.querySelectorAll("button[role=tab]").forEach(e=>{e.ariaSelected=String(e.getAttribute("aria-controls")==="tab_"+n)})}),i.append(t)}for(let e in n.append(i),t[Object.keys(t)[0]].hidden=!1,t)n.append(t[e]);let o=document.createElement("section");o.classList.add("field-row"),o.style.justifyContent="flex-end";let r=document.createElement("button");r.className="default",r.textContent="OK",r.addEventListener("click",()=>this.onConfirm(e)),o.append(r),e.append(n),e.append(o),i.querySelector("button").ariaSelected="true"}setValidator(e){this.validator=e}display(){return super.display()}constructor(e,t,n=null,o=null,r=d.pc,s=350){super(e,o,r,s),(0,i._)(this,"schema",void 0),(0,i._)(this,"validator",void 0),this.validator=n,this.schema=t}}var m=n("512"),f=n.n(m);function g(){return[[{id:"normalizeGraph",sprite:null,label:"Normalize graph",enabled:!0,nested:null},{id:"unhighlight",sprite:null,label:"Remove highlights",enabled:!0,nested:null}],[{id:null,sprite:null,label:"Generate",enabled:!0,nested:[[{id:"genNetwork",sprite:"/ico/32/workgroup.png",label:"Regional Network",enabled:!0,nested:null}]]},{id:null,sprite:null,label:"New",enabled:!0,nested:[[{id:"newRouter",sprite:"/ico/32/switch.png",label:"Router",enabled:!0,nested:null},{id:"newEndpoint",sprite:"/ico/32/endpoint.png",label:"Endpoint",enabled:!0,nested:null},{id:null,sprite:"/ico/32/silly.png",label:"Decorations",enabled:!0,nested:[[{id:"suisei",sprite:null,label:"Hoshimachi Suisei",enabled:!0,nested:null}]]}]]}]]}function v(){return[[{id:"connect",sprite:"/ico/32/patchcord.png",label:"Connect",enabled:!0,nested:null},{id:"properties",sprite:"/ico/32/properties.png",label:"Properties",enabled:!0,nested:null},{id:"delete",sprite:null,label:"Delete",enabled:!0,nested:null}]]}function y(){return[[{id:"properties",sprite:"/ico/32/properties.png",label:"Properties",enabled:!0,nested:null},{id:"delete",sprite:null,label:"Delete",enabled:!0,nested:null}]]}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={Configuration:{name:new u("Hostname","text",{value:null==e?void 0:e.hostname,placeholder:"pc1.local",disabled:!!e}),ipAddr:new u("IP","text",{value:null==e?void 0:e.ipAddr,placeholder:"192.168.0.1",disabled:!!e})}},n=new p(e?`Edit endpoint: ${e.hostname}`:"New endpoint",t,null,null,d.pc|d.G5,420);return n.setValidator((e,t)=>t?"ipAddr"!=e||f().IPv4.isValid(t)?null:`IP address ${t} is invalid`:`${e} can't be empty`),n}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={Configuration:{name:new u("Hostname","text",{value:null==e?void 0:e.hostname,placeholder:"mikrotik.internal.amog.us",disabled:!!e}),lanIp:new u("IP (LAN)","text",{value:(null==e?void 0:e.lanIpAddr)??"192.168.0.1",placeholder:"192.168.0.1"}),wanIp:new u("IP","text",{value:(null==e?void 0:e.extIpAddr)??"47.236.4.1",placeholder:"47.236.4.247"})}},n=new p(e?`Edit router: ${e.hostname}`:"New router",t,null,null,d.pc|d.G5,420);return n.setValidator((e,t)=>t?"lanIpAddr"!=e||f().IPv4.isValid(t)?"wanIp"!=e||f().IPv4.isValid(t)?null:`LAN IP address ${t} is invalid`:`LAN IP address ${t} is invalid`:`${e} can't be empty`),n}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={Configuration:{name:new u("Name","text",{value:(null==e?void 0:e.name)??"C1",placeholder:"C1",disabled:!!e}),errorRate:new u("Error rate (%)","number",{min:0,max:100,step:5,value:(null==e?void 0:e.errors)??0}),from:new u("From","select",{disabled:!0,options:{def:[t??(null==e?void 0:e.from),1]}}),to:new u("To","select",{disabled:!0,options:{def:[n??(null==e?void 0:e.to),1]}}),weight:new u("Weight","select",{options:{2:[2,0],3:[3,0],5:[5,0],8:[8,0],11:[11,0],12:[12,0],14:[14,0],15:[15,0],18:[18,1],20:[20,0]}}),duplex:new u("Duplex","select",{options:{yes:["Duplex",!0],no:["Non-duplex",!1]},asRadioGroup:!0}),type:new u("Type","select",{options:{fiber:["Optical Fiber",!0],satellite:["Satellite",!1]},asRadioGroup:!0})}};return new p(e?`Edit router: ${e.name}`:`New connection: ${t} -> ${n}`,i,null,null,d.r2|d.G5,420)}function x(e){let t=e.map(e=>[e,0]);return t[0][1]=1,new p("Find route",{Properties:{from:new u("From","select",{options:t}),to:new u("To","select",{options:t})}},null,null,d.pc|d.G5,420)}function k(e){let t=e.map(e=>[e,0]);return t[0][1]=1,new p("Trace packet",{Properties:{from:new u("From","select",{options:t}),to:new u("To","select",{options:t}),mtu:new u("MTU","number",{min:100,max:15e4,step:100,value:1500}),size:new u("Payload size","number",{min:8,max:0x1000000,step:8,value:1024}),protocol:new u("Protocol","select",{options:{tcp:["TCP",1],udp:["UDP",0]},asRadioGroup:!0})}},null,null,d.pc|d.G5,420)}function C(){return new p("Create regional network",{Properties:{prefix:new u("Prefix","text",{value:"R1",placeholder:"R1"}),ipPrefix:new u("IP Prefix","text",{value:"47.236.4.",placeholder:"47.236.4."}),hosts:new u("Hosts","number",{min:0,max:48,step:1,value:8}),power:new u("Target power","number",{min:2.5,max:20,step:.1,value:3.5}),minErrors:new u("Error rate (%, min)","number",{min:0,max:100,step:5,value:0}),maxErrors:new u("Error rate (%, max)","number",{min:0,max:100,step:5,value:0}),connType:new u("Type","select",{options:{rand:["Randomize",!0],fiber:["Optical Fiber",!1],satellite:["Satellite",!1]},asRadioGroup:!0}),connDuplex:new u("Duplex","select",{options:{rand:["Randomize",!0],duplex:["Only duplex",!1],noDuplex:["Only non-duplex",!1]},asRadioGroup:!0})}},null,null,d.pc|d.G5,420)}var _=n("980"),R=n("509"),O=n("729"),P=n.n(O),A=n("147"),L=n("903"),S=n("757");class N{get canvas(){return this.renderer.domElement}get canvasRect(){return this.canvas.getBoundingClientRect()}renderLoop(){this.orbitControls&&this.camera&&(this.orbitControls.update(),this.renderer.render(this.scene,this.camera))}getNameByObject(e){for(let t in this.entityMap){let n=this.entityMap[t];if(n.icon.id==e.id||n.label.id==e.id)return t}return null}kindToMaterial(e){switch(e){case"endpoint":return this.textures.endpoint;case"router":return this.textures.router;default:return null}}onDeviceAdded(e,t){if(!t.coords)return;let n=this.kindToMaterial(e);if(!n)return;let i=new o.Kj0(new o._12(64,64),n),r=new o.Kj0(new R.M(t.hostname,{font:this.textures.font,size:18,curveSegments:12}),new o.vBJ({color:N.TEXT_COLOR}));i.position.set(t.coords.x,t.coords.y,2),r.position.set(t.coords.x+28,t.coords.y+18,3),this.scene.add(i),this.scene.add(r),this.entityMap[t.hostname]={icon:i,label:r},this.dragControls.objects.push(i)}onObjectChanged(e){let t=e.coords;if(!t)return;let n="hostname"in e,i=this.entityMap[n?e.hostname:e.name];1!=this.state&&(i.icon.position.x=t.x,i.icon.position.y=t.y),i.label.position.x=t.x+28,i.label.position.y=t.y+18,n&&this.model.getConnectionsByHostname(e.hostname).forEach(e=>this.onConnectionChanged(e))}calculateLineProperties(e){let t,n=this.model.get(e.from),i=this.model.get(e.to),r=n.coords,s=i.coords,a=new o.u9r().setFromPoints([new o.Pa4(r.x,r.y,1),new o.Pa4(s.x,s.y,1)]),l=N.HIGHLIGHTED_COLOR;!e.highlighted&&(l=e.duplex?N.DUPLEX_COLOR:N.NON_DUPLEX_COLOR),t=e.type==_.Rj.Satellite?new o.FT0({color:new o.Ilk(l),dashSize:10,gapSize:10}):new o.nls({color:new o.Ilk(l)});let d=new o.Pa4((r.x+s.x)/2+10,(r.y+s.y)/2,2),c=new o.Kj0(new R.M(`${e.name} (${e.weight})`,{font:this.textures.font,size:14,curveSegments:12}),new o.vBJ({color:e.highlighted?N.HIGHLIGHTED_COLOR:N.TEXT_COLOR}));return c.position.copy(d),[a,t,c]}onConnectionAdded(e){let[t,n,i]=this.calculateLineProperties(e),r=new o.x12(t,n).computeLineDistances();this.scene.add(r),this.scene.add(i),this.entityMap[e.name]={icon:r,label:i},this.sounds.connCreate.play()}onConnectionChanged(e){let[t,n,i]=this.calculateLineProperties(e),o=this.entityMap[e.name];this.scene.remove(o.label),o.label=i,this.scene.add(o.label);let r=o.icon;r.geometry=t,r.material=n,r.computeLineDistances()}onObjectRemoved(e){let t=this.entityMap[e];this.scene.remove(t.icon,t.label),delete this.entityMap[e]}onModelObjectAdded(e){switch(e.kind){case"endpoint":case"router":this.onDeviceAdded(e.kind,e.object);break;case"connection":this.onConnectionAdded(e.object)}}onModelObjectChanged(e){e.affectedObjects.forEach(e=>{this.entityMap[e.name||e.hostname].icon instanceof o.x12?this.onConnectionChanged(e):this.onObjectChanged(e)})}onModelObjectRemoved(e){this.onObjectRemoved(e.id)}onIconDrag(e){let t=this.getNameByObject(e.object);if(!t)return;let n=this.entityMap[t];switch(this.model.typeOf(t)){case"endpoint":this.model.editEndpoint(t,n.icon.position.x,n.icon.position.y);break;case"router":this.model.editRouter(t,null,null,n.icon.position.x,n.icon.position.y)}}async onDeviceContextMenu(e,t,n){switch(await new l(v(),this.canvas).prompt(n.clientX,n.clientY)){case"properties":if("endpoint"==e){let e=w(t);e.setContainer(this.canvas),await e.display()}else if("router"==e){let e=t,n=b(e);n.setContainer(this.canvas);let i=await n.display();if(i.result==h.OK){let t=i.data;try{this.model.editRouter(e.hostname,null==t?void 0:t.lanIp,null==t?void 0:t.wanIp)}catch(e){await new c.z("Error",e.message,this.canvas,d.pc|d.G5).display()}}}break;case"connect":this.dragControls.disconnect(),this.state=2,this.canvas.style.cursor="alias",this.connectionOrigin=t.hostname;break;case"delete":"endpoint"==e?this.model.removeEndpoint(t.hostname):"router"==e&&this.model.removeRouter(t.hostname)}}async onConnectionContextMenu(e,t){switch(await new l(y(),this.canvas).prompt(t.clientX,t.clientY)){case"properties":{let t=E(e);t.setContainer(this.canvas);let n=await t.display();if(n.result==h.OK){let t=n.data;try{this.model.editConnection(e.name,Number(null==t?void 0:t.weight),(null==t?void 0:t.duplex)=="yes",(null==t?void 0:t.type)=="fiber"?_.Rj.OpticFiber:_.Rj.Satellite,Number(null==t?void 0:t.errorRate))}catch(e){await new c.z("Error",e.message,this.canvas,d.pc|d.G5).display()}}break}case"delete":this.model.removeConnection(e.name)}}async generateNetwork(e,t,n,i,o,r,s){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=[2,3,5,8,11,12,14,15,18,20],d=[];for(let i=0;i<n;i++){let n=_.F0.create({hostname:`${e}-R${i}`,lanIpAddr:"192.168.0.1",extIpAddr:t+i,coords:{x:0,y:0}});d.push(n.hostname),this.model.addRouter(n)}let c=Math.ceil(i*n/2);for(let t=0;t<c;t++){let n=d[Math.floor(Math.random()*d.length)],i=d.filter(e=>e!=n),c=i[Math.floor(Math.random()*i.length)];if(this.model.getConnectionByPair(n,c)){t--;continue}let h=null!==s?s:Math.random()>=.5?_.Rj.Satellite:_.Rj.OpticFiber,u=null!==a?a:Math.random()>=.5,p=Math.ceil(Math.random()*(r-o)+o),m=l[Math.floor(Math.random()*l.length)];this.model.connectRouterToRouter(`${e}-C${t}`,n,c,m,u,h,p)}this.model.normalizeEntityCoordinates()}async onGraphClick(e,t){var n,i,o,r,s;switch(await new l(g(),this.canvas).prompt(e.clientX,e.clientY)){case"unhighlight":this.model.clearHighlights();break;case"genNetwork":{let e,t,n=C();n.setContainer(this.canvas);let i=await n.display();if(i.result!=h.OK)return;let o=i.data;switch(o.connType){case"fiber":e=_.Rj.OpticFiber;break;case"satellite":e=_.Rj.Satellite;break;default:e=null}switch(o.connDuplex){case"duplex":t=!0;break;case"noDuplex":t=!1;break;default:t=null}this.generateNetwork(o.prefix,o.ipPrefix,Number(o.hosts),Number(o.power),Number(o.minErrors),Number(o.maxErrors),e,t);break}case"newEndpoint":{let e=w();e.setContainer(this.canvas);let o=await e.display();if(o.result==h.OK)try{this.model.addEndpoint(_.F5.create({hostname:null===(n=o.data)||void 0===n?void 0:n.name,ipAddr:null===(i=o.data)||void 0===i?void 0:i.ipAddr,coords:{x:Math.ceil(t.x),y:Math.ceil(t.y)}}))}catch(e){await new c.z("Error",e.message,this.canvas,d.pc|d.G5).display()}break}case"newRouter":{let e=b();e.setContainer(this.canvas);let n=await e.display();if(n.result==h.OK)try{this.model.addRouter(_.F0.create({hostname:null===(o=n.data)||void 0===o?void 0:o.name,lanIpAddr:null===(r=n.data)||void 0===r?void 0:r.lanIp,extIpAddr:null===(s=n.data)||void 0===s?void 0:s.wanIp,coords:{x:Math.ceil(t.x),y:Math.ceil(t.y)}}))}catch(e){await new c.z("Error",e.message,this.canvas,d.pc|d.G5).display()}break}case"normalizeGraph":this.model.normalizeEntityCoordinates()}}async onConnectionRequest(e,t){if(e==t){await new c.z("Error","Can't connect device to itself",this.canvas,d.pc|d.G5).display();return}let n=this.model.typeOf(e),i=this.model.typeOf(t);if(!n||!i)return;let o=E(null,e,t);o.setContainer(this.canvas);let r=await o.display();if(r.result!=h.OK)return;let s=r.data;try{if("endpoint"==n&&"endpoint"==i){let n=this.model.getConnectionsByHostname(e)[0],i=this.model.getConnectionsByHostname(t)[0];n&&this.model.removeConnection(n.name),i&&this.model.removeConnection(i.name),this.model.connectEndpointToEndpoint(null==s?void 0:s.name,e,t,Number(null==s?void 0:s.weight),(null==s?void 0:s.duplex)=="yes",(null==s?void 0:s.type)=="fiber"?_.Rj.OpticFiber:_.Rj.Satellite,Number(null==s?void 0:s.errorRate))}else if("endpoint"==n&&"router"==i){let n=this.model.getConnectionsByHostname(e)[0];n&&this.model.removeConnection(n.name),this.model.connectEndpointToRouter(null==s?void 0:s.name,e,t,Number(null==s?void 0:s.weight),(null==s?void 0:s.duplex)=="yes",(null==s?void 0:s.type)=="fiber"?_.Rj.OpticFiber:_.Rj.Satellite,Number(null==s?void 0:s.errorRate))}else if("router"==n&&"endpoint"==i){let n=this.model.getConnectionsByHostname(t)[0];n&&this.model.removeConnection(n.name),this.model.connectEndpointToRouter(null==s?void 0:s.name,t,e,Number(null==s?void 0:s.weight),(null==s?void 0:s.duplex)=="yes",(null==s?void 0:s.type)=="fiber"?_.Rj.OpticFiber:_.Rj.Satellite,Number(null==s?void 0:s.errorRate))}else if("router"==n&&"router"==i)this.model.connectRouterToRouter(null==s?void 0:s.name,e,t,Number(null==s?void 0:s.weight),(null==s?void 0:s.duplex)=="yes",(null==s?void 0:s.type)=="fiber"?_.Rj.OpticFiber:_.Rj.Satellite,Number(null==s?void 0:s.errorRate));else throw Error(`Can't connect ${n} to ${i}`)}catch(e){await new c.z("Error",e.message,this.canvas,d.pc|d.G5).display()}}onCanvasClickBegin(e){2==e.button&&(this.rightClickCoords=e.clientX*e.clientY)}onCanvasClickEnd(e){if(!this.camera||2==e.button&&e.clientX*e.clientY!=this.rightClickCoords)return;let t=new o.FM8((e.clientX-this.canvasRect.left)/this.w*2-1,-((e.clientY-this.canvasRect.top)/this.h*2-1));this.raycaster.setFromCamera(t,this.camera);let n=this.raycaster.intersectObjects(this.scene.children);for(let t=0;t<n.length;t++){if("GridHelper"==n[t].object.type)continue;let i=this.getNameByObject(n[t].object);if(!i)return;if(2==e.button&&2!=this.state)switch(this.model.typeOf(i)){case"endpoint":this.onDeviceContextMenu("endpoint",this.model.getEndpoint(i),e);break;case"router":this.onDeviceContextMenu("router",this.model.getRouter(i),e);break;case"connection":this.onConnectionContextMenu(this.model.getConnection(i),e)}else 0==e.button&&2==this.state&&(this.dragControls.connect(),this.state=0,this.connectionOrigin&&this.onConnectionRequest(this.connectionOrigin,i));return}let i=new o.Pa4(t.x,t.y,0).unproject(this.camera);i=new o.FM8(i.x,i.y),2==e.button&&this.onGraphClick(e,i)}onSaveButtonClick(){P()(this.model.snapshot,prompt("Save as:","network.topology")??"network.topology","application/vnd.net-topology")}async onOpenButtonClick(){let e=await window.showOpenFilePicker({excludeAcceptAllOption:!0,startIn:"documents",types:[{description:"Topology maps",accept:{"application/vnd.net-topology":[".topology"]}}]});if(!e[0])return;let t=await e[0].getFile(),n=new Uint8Array(await t.arrayBuffer());try{this.model.snapshot=n}catch(t){let e=t.message;e=`Error while importing snapshot: ${e}`,await new c.z("Import error",e,this.canvas,d.pc|d.G5).display()}}async onTraceRequest(){let e=this.model.hostnames;if(e.length<2){await new c.z("Error","This functionality is available only when 2 or more nodes added",this.canvas,d.pc|d.G5).display();return}let t=k(e);t.setContainer(this.canvas);let n=await t.display();if(n.result!=h.OK)return;let i=e[n.data.from],o=e[n.data.to],r=Number(n.data.mtu),s=Number(n.data.size),a="tcp"==n.data.protocol?new L.S:new A.p;a.setModel(this.model);let l=a.runTest(i,o,r,s);await new c.z("Results",`<pre>${JSON.stringify(l,null,"	")}</pre>`,this.canvas,d.pc|d.G5).display()}async onRouteHighlightRequest(){let e=this.model.hostnames;if(e.length<2){await new c.z("Error","This functionality is available only when 2 or more nodes added",this.canvas,d.pc|d.G5).display();return}let t=x(e);t.setContainer(this.canvas);let n=await t.display();if(n.result!=h.OK)return;let i=e[n.data.from],o=e[n.data.to],r=this.model.findRoute(i,o);if(!r){await new c.z("No route to host",`No route to host ${o} from ${i}`,this.canvas,d.pc|d.G5).display();return}this.model.clearHighlights(),r.forEach(e=>this.model.highlightConnection(e.name))}async init(){var e,t,n,i,r;let l=new o.VLJ(1e5,1e3);l.material=new o.nls({color:N.GRID_COLOR}),l.rotation.x=Math.PI/2,l.position.z=-10,this.scene.add(l);let c=this.r*this.h;this.camera=new o.iKG(-(c/2),c/2,this.h/2,-(this.h/2),-80,80),this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0),this.orbitControls=new a.z(this.camera,this.renderer.domElement),this.orbitControls.minZoom=.1,this.orbitControls.maxZoom=2,this.orbitControls.mouseButtons.LEFT=null,this.dragControls=new s.S([],this.camera,this.renderer.domElement),this.dragControls.addEventListener("drag",e=>this.onIconDrag(e)),this.dragControls.addEventListener("dragstart",e=>{this.state=1}),this.dragControls.addEventListener("dragend",e=>{this.state=0}),this.renderer.setAnimationLoop(()=>this.renderLoop()),this.renderer.setSize(this.w,this.h),this.renderer.domElement.addEventListener("pointerdown",e=>this.onCanvasClickBegin(e)),this.renderer.domElement.addEventListener("pointerup",e=>this.onCanvasClickEnd(e)),null===(e=document.getElementById("saveFileBtn"))||void 0===e||e.addEventListener("click",()=>this.onSaveButtonClick()),null===(t=document.getElementById("openFileBtn"))||void 0===t||t.addEventListener("click",()=>this.onOpenButtonClick()),null===(n=document.getElementById("traceBtn"))||void 0===n||n.addEventListener("click",()=>this.onTraceRequest()),null===(i=document.getElementById("routeHighlightBtn"))||void 0===i||i.addEventListener("click",()=>this.onRouteHighlightRequest()),null===(r=document.getElementById("analysisBtn"))||void 0===r||r.addEventListener("click",()=>{let e=new S.m("Transient analysis",this.canvas,d.pc|d.G5|d.r2,800);e.model=this.model,e.display()}),document.body.addEventListener("keydown",e=>{e.ctrlKey&&(79==e.which?(this.onOpenButtonClick(),e.preventDefault()):83==e.which&&(this.onSaveButtonClick(),e.preventDefault()))})}constructor(e,t,n,s=window.innerWidth,a=window.innerHeight-28){(0,i._)(this,"w",void 0),(0,i._)(this,"h",void 0),(0,i._)(this,"r",void 0),(0,i._)(this,"textures",void 0),(0,i._)(this,"sounds",void 0),(0,i._)(this,"raycaster",new o.iMs),(0,i._)(this,"renderer",new r.CP7({antialias:!0})),(0,i._)(this,"camera",null),(0,i._)(this,"scene",new o.xsS),(0,i._)(this,"orbitControls",null),(0,i._)(this,"dragControls",null),(0,i._)(this,"entityMap",{}),(0,i._)(this,"rightClickCoords",0),(0,i._)(this,"connectionOrigin",null),(0,i._)(this,"state",0),(0,i._)(this,"model",void 0),this.w=s,this.h=a,this.r=s/a,this.scene.background=new o.Ilk(N.BG_COLOR),this.model=e,this.model.addEventListener("added",e=>this.onModelObjectAdded(e)),this.model.addEventListener("change",e=>this.onModelObjectChanged(e)),this.model.addEventListener("removed",e=>this.onModelObjectRemoved(e)),this.textures=t,this.sounds=n}}(0,i._)(N,"BG_COLOR",0xfffcf8),(0,i._)(N,"GRID_COLOR",0xdcdcd7),(0,i._)(N,"TEXT_COLOR",128),(0,i._)(N,"DUPLEX_COLOR",6435496),(0,i._)(N,"NON_DUPLEX_COLOR",3319927),(0,i._)(N,"HIGHLIGHTED_COLOR",0xe82917)},25:function(e,t,n){n.d(t,{G5:function(){return d},pc:function(){return a},r2:function(){return l},sD:function(){return c}});var i=n(412),o=n(450);let r=1,s=2,a=4,l=8,d=16;class c{onUserClose(e){this.close(null)}createElement(){let e=document.createElement("div");e.className="title-bar",e.innerHTML=`<div class="title-bar-text">${this.title}</div>`;let t=document.createElement("div"),n=document.createElement("button");n.ariaLabel="Minimize";let i=document.createElement("button");i.ariaLabel="Maximize";let o=document.createElement("button");o.ariaLabel="Close",this.properties&r&&(console.log("h"),n.addEventListener("click",e=>this.onMinimize(e)),t.append(n)),this.properties&s?(i.addEventListener("click",e=>this.onMaximize(e)),t.append(i)):!(this.properties&l)&&(t.append(i),i.disabled=!0),this.properties&a&&(o.addEventListener("click",e=>this.onUserClose(e)),t.append(o)),t.hasChildNodes()&&(t.className="title-bar-controls",e.append(t));let d=document.createElement("div");d.classList.add("window-body"),d.classList.add("has-space"),this.onRender(d);let c=document.createElement("div");return c.classList.add("dialog"),c.classList.add("window"),c.classList.add("active"),c.style.minWidth=`${this.width}px`,c.append(e),c.append(d),c}isDisplayed(){return null!=this.dialogEl}close(e){if(!this.isDisplayed())throw Error("Dialog has not been displayed yet");this.dialogEl.remove(),this.resolve(e),this.containerEl.classList.remove("hasOpenDialog"),this.containerEl.style.pointerEvents="unset",this.containerEl.parentElement.classList.contains("window")?this.containerEl.parentElement.classList.add("active"):this.containerEl.classList.contains("window")&&this.containerEl.classList.add("active")}display(){return new Promise((e,t)=>{if(this.isDisplayed())return t("Dialog is already displayed");if(this.properties&d){if(this.containerEl.classList.contains("hasOpenDialog"))return t("Another modal dialog is already open within this context");this.containerEl.classList.add("hasOpenDialog"),this.containerEl.style.pointerEvents="none",this.containerEl.parentElement.classList.contains("window")?this.containerEl.parentElement.classList.remove("active"):this.containerEl.classList.contains("window")&&this.containerEl.classList.remove("active")}this.resolve=e,this.dialogEl=this.createElement(),this.dialogEl.style.visibility="hidden",document.body.append(this.dialogEl);let n=this.containerEl.getBoundingClientRect(),i=this.dialogEl.getBoundingClientRect();this.dialogEl.style.top=`${n.top+n.height/2-i.height/2}px`,this.dialogEl.style.left=`${n.left+n.width/2-i.width/2}px`,this.dialogEl.style.perspective=`${i.height}px`,this.dialogEl.style.transform="rotateX(-90deg)",this.dialogEl.style.visibility="unset",o.p8.to(this.dialogEl,{rotateX:0,duration:.08})})}setContainer(e){this.containerEl=e}constructor(e,t=null,n=a,o=350){(0,i._)(this,"title",void 0),(0,i._)(this,"width",void 0),(0,i._)(this,"properties",void 0),(0,i._)(this,"containerEl",void 0),(0,i._)(this,"dialogEl",null),(0,i._)(this,"resolve",null),this.title=e,this.width=o,this.properties=n,this.containerEl=t??document.body}}},690:function(e,t,n){n.d(t,{z:function(){return r}});var i=n(412),o=n(25);class r extends o.sD{onMaximize(e){}onMinimize(e){}onRender(e){e.innerHTML=this.text;let t=document.createElement("section");t.classList.add("field-row"),t.style.justifyContent="flex-end";let n=document.createElement("button");n.className="default",n.textContent="OK",n.addEventListener("click",()=>this.close(null)),t.append(n),e.append(t)}constructor(e,t,n,r=o.pc,s=350){super(e,n,r,s),(0,i._)(this,"text",void 0),this.text=t}}},576:function(e,t,n){n.a(e,async function(e,t){try{n(260),n(700);var i=n(345),o=n(514),r=n(591),s=n(641),a=n(766);let e={},l=new r.dpR,d=new s.J;try{let t=await l.loadAsync("/ico/256/endpoint.png");t.colorSpace="srgb";let n=await l.loadAsync("/ico/256/switch.png");n.colorSpace="srgb",e.endpoint=new r.vBJ({map:t,transparent:!0}),e.router=new r.vBJ({map:n,transparent:!0}),e.font=await d.loadAsync("/font.json")}catch(e){console.log(e)}let c=new a.Howl({src:["/sounds/conn_create.wav"],html5:!0}),h=new a.Howl({src:["/sounds/conn_remove.wav"],html5:!0}),u={connCreate:c,connRemove:h};c.on("load",()=>{h.on("load",async()=>{let t=new o.C_,n=new i.W(t,e,u);await n.init(),document.body.append(n.canvas)})}),t()}catch(e){t(e)}},1)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,(()=>{var e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=function(e){e&&e.d<1&&(e.d=1,e.forEach(function(e){e.r--}),e.forEach(function(e){e.r--?e.r++:e()}))},o=function(o){return o.map(function(o){if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var r=[];r.d=0,o.then(function(e){s[t]=e,i(r)},function(e){s[n]=e,i(r)});var s={};return s[e]=function(e){e(r)},s}}var a={};return a[e]=function(){},a[t]=o,a})};__webpack_require__.a=function(r,s,a){a&&((l=[]).d=-1);var l,d,c,h,u=new Set,p=r.exports,m=new Promise(function(e,t){h=t,c=e});m[t]=p,m[e]=function(e){l&&e(l),u.forEach(e),m.catch(function(){})},r.exports=m,s(function(i){d=o(i);var r,s=function(){return d.map(function(e){if(e[n])throw e[n];return e[t]})},a=new Promise(function(t){(r=function(){t(s)}).r=0;var n=function(e){e===l||u.has(e)||(u.add(e),e&&!e.d&&(r.r++,e.push(r)))};d.map(function(t){t[e](n)})});return r.r?a:s()},function(e){e?h(m[n]=e):c(p),i(l)}),l&&l.d<0&&(l.d=0)}})(),(()=>{__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t}})(),(()=>{__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}()})(),(()=>{__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}})(),(()=>{var e=[];__webpack_require__.O=function(t,n,i,o){if(n){o=o||0;for(var r=e.length;r>0&&e[r-1][2]>o;r--)e[r]=e[r-1];e[r]=[n,i,o];return}for(var s=1/0,r=0;r<e.length;r++){for(var n=e[r][0],i=e[r][1],o=e[r][2],a=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(__webpack_require__.O).every(function(e){return __webpack_require__.O[e](n[l])})?n.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(r--,1);var d=i();void 0!==d&&(t=d)}}return t}})(),(()=>{__webpack_require__.rv=function(){return"1.1.8"}})(),(()=>{var e={980:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var i=n[0],o=n[1],r=n[2],s,a,l=0;if(i.some(function(t){return 0!==e[t]})){for(s in o)__webpack_require__.o(o,s)&&(__webpack_require__.m[s]=o[s]);if(r)var d=r(__webpack_require__)}for(t&&t(n);l<i.length;l++)a=i[l],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(d)},n=self.webpackChunkcn_coursework=self.webpackChunkcn_coursework||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{__webpack_require__.ruid="bundler=rspack@1.1.8"})();var __webpack_exports__=__webpack_require__.O(void 0,["258"],function(){return __webpack_require__("576")});__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();